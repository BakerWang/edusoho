{% extends 'TopxiaWebBundle:Settings:layout.html.twig' %}

{% block title %}{{ '密码修改'|trans }} - {{ parent() }}{% endblock %}

{% set script_controller = 'settings/password' %}
{% set side_nav = 'password' %}

{% block main %}
  {% embed "TopxiaWebBundle:Bootstrap:panel.html.twig" with {class:'panel-col'} %}
    {% block heading %}{{ '密码修改'|trans }}{% endblock %}
    {% block body %}
      {% if not app.user.password %}
        <div class="alert alert-warning">
          <p>{{ '当前帐号从第三方帐号直接登录时创建，尚未设置密码。'|trans }}</p>
          <p>{{ '为了帐号的安全，请通过邮箱找回密码的方式，重设密码！'|trans }}</p>
          <p><a href="{{ path('password_reset') }}" class="btn btn-primary">{{ '现在就去重设密码！'|trans }}</a></p>
        </div>
      {% endif %}

      <form id="settings-password-form" class="form-horizontal" method="post" {% if not app.user.password %} style="display:none;"{% endif %}>

        {{ web_macro.flash_messages() }}
        
        <div class="form-group">
          <label for="current-password-field" class="control-label col-md-2">{{ '当前密码'|trans }}</label>
          <div class="col-md-8 controls">
            <input id="current-password-field" class="form-control" type="password" name="currentPassword">
          </div>
        </div>

        <div class="form-group">
          <label for="new-password-field" class="control-label col-md-2">{{ '新密码'|trans }}</label>
          <div class="col-md-8 controls">
            <input id="new-password-field" class="form-control" type="password" name="newPassword">
          </div>
        </div>

        <div class="form-group">
          <label for="confrim-password-field" class="control-label col-md-2">{{ '确认密码'|trans }}</label>
          <div class="col-md-8 controls">
            <input id="confrim-password-field" class="form-control" type="password" name="confirmPassword">
          </div>
        </div>

        <div class="form-group">
          <div class="col-md-2 control-label"></div>
          <div class="col-md-8 controls">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
            <button id="password-save-btn" data-submiting-text="{{ '正在保存'|trans }}" type="submit" class="btn btn-primary">{{ '提交'|trans }}</button>
          </div>
        </div>

      </form>
    {% endblock %}
  {% endembed %}
{% endblock %}